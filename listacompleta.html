<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista Completa</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Lista Completa</h1>
        <nav>
            <ul class="menu">
                <li><a href="index.html">Home page</a></li>
                <li><a href="#">Catalogo</a>
                    <ul class="submenu">
                        <li><a href="listacompleta.html">Lista completa</a></li>
                        <li><a href="#">Lista per persona</a></li>
                        <li><a href="#">Lista per mese</a></li>
                    </ul>
                </li>
                <li><a href="#">Chi siamo</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="catalog">
            <h2>Lettere</h2>
            <div id="letter-container"></div>
        </section>
    </main>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const container = document.getElementById('letter-container');

            // Carica dinamicamente i file XML dalla cartella "letters"
            const letterFiles = ['letters/letter1.xml', 'letters/letter2.xml']; // Lista dei file XML

            letterFiles.forEach(file => {
                fetch(file)
                    .then(response => response.text())
                    .then(data => {
                        const parser = new DOMParser();
                        const xml = parser.parseFromString(data, "application/xml");

                        // Controlla se il documento XML Ã¨ correttamente parsato
                        if (xml.getElementsByTagName('letter').length > 0) {
                            const letter = xml.getElementsByTagName('letter')[0];
                            const title = letter.getElementsByTagName('dc:title')[0].textContent;
                            const author = letter.getElementsByTagName('dc:creator')[0].textContent;
                            const date = letter.getElementsByTagName('dc:date')[0].textContent;
                            const content = letter.getElementsByTagName('tei:content')[0].textContent;
                            const image = letter.getElementsByTagName('dc:image')[0].textContent;
                            const file = letter.getElementsByTagName('dc:file')[0].textContent;

                            const letterDiv = document.createElement('div');
                            letterDiv.classList.add('letter');
                            letterDiv.innerHTML = `
                                <h3>${title}</h3>
                                <p><strong>Autore:</strong> ${author}</p>
                                <p><strong>Data:</strong> ${date}</p>
                                <p>${content}</p>
                                <img src="${image}" alt="${title}" class="letter-image">
                                <a href="${file}" download class="download-button">Scarica il file</a>
                            `;
                            container.appendChild(letterDiv);
                        } else {
                            console.error(`Il documento XML ${file} non contiene elementi letter validi.`);
                        }
                    })
                    .catch(error => console.error('Errore nel caricamento del file XML:', error));
            });
        });
    </script>
</body>
</html>
